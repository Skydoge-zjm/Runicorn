# å®æ—¶ç›‘æ§å·¥ä½œæµ - å®Œæ•´æŒ‡å—

**åœºæ™¯**: åœ¨æœ¬åœ° SSH åˆ°è¿œç¨‹æœåŠ¡å™¨è®­ç»ƒæ¨¡å‹ï¼Œå®æ—¶åœ¨æœ¬åœ°æŸ¥çœ‹è®­ç»ƒæŒ‡æ ‡

**é€‚ç”¨äº**: 
- ML ç ”ç©¶å‘˜å’Œå·¥ç¨‹å¸ˆ
- è¿œç¨‹ GPU æœåŠ¡å™¨è®­ç»ƒ
- éœ€è¦å®æ—¶ç›‘æ§è®­ç»ƒè¿›åº¦

---

## ğŸ“‹ ç›®å½•

1. [å·¥ä½œæµæ¦‚è§ˆ](#å·¥ä½œæµæ¦‚è§ˆ)
2. [ç¯å¢ƒå‡†å¤‡](#ç¯å¢ƒå‡†å¤‡)
3. [æ­¥éª¤ 1: åœ¨æœåŠ¡å™¨è®­ç»ƒæ¨¡å‹](#æ­¥éª¤-1-åœ¨æœåŠ¡å™¨è®­ç»ƒæ¨¡å‹)
4. [æ­¥éª¤ 2: é…ç½®è¿œç¨‹åŒæ­¥](#æ­¥éª¤-2-é…ç½®è¿œç¨‹åŒæ­¥)
5. [æ­¥éª¤ 3: å®æ—¶æŸ¥çœ‹æŒ‡æ ‡](#æ­¥éª¤-3-å®æ—¶æŸ¥çœ‹æŒ‡æ ‡)
6. [é«˜çº§ç”¨æ³•](#é«˜çº§ç”¨æ³•)
7. [æ•…éšœæ’é™¤](#æ•…éšœæ’é™¤)

---

## å·¥ä½œæµæ¦‚è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      å®Œæ•´å·¥ä½œæµ                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  æœåŠ¡å™¨ç«¯ (GPU è®­ç»ƒæœåŠ¡å™¨)                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  1. è®­ç»ƒè„šæœ¬ (train.py)                               â”‚ â”‚
â”‚  â”‚     import runicorn                                   â”‚ â”‚
â”‚  â”‚     run = runicorn.init(...)                          â”‚ â”‚
â”‚  â”‚     run.log({"loss": loss, "acc": acc})              â”‚ â”‚
â”‚  â”‚                                                       â”‚ â”‚
â”‚  â”‚  2. å®éªŒæ•°æ®ä¿å­˜åˆ°                                     â”‚ â”‚
â”‚  â”‚     /data/experiments/my_project/exp1/runs/...        â”‚ â”‚
â”‚  â”‚                                                       â”‚ â”‚
â”‚  â”‚  3. Manifest ç”Ÿæˆ (å¯é€‰ï¼Œæ¨è)                         â”‚ â”‚
â”‚  â”‚     runicorn generate-manifest                        â”‚ â”‚
â”‚  â”‚     â†’ .runicorn/full_manifest.json                    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                          â†“                                  â”‚
â”‚                    SSH + SFTP åŒæ­¥                          â”‚
â”‚                          â†“                                  â”‚
â”‚  æœ¬åœ°ç«¯ (å¼€å‘æœºå™¨)                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  4. SSH è¿œç¨‹åŒæ­¥é…ç½®                                   â”‚ â”‚
â”‚  â”‚     runicorn viewer (å¯åŠ¨ Web UI)                     â”‚ â”‚
â”‚  â”‚     â†’ é…ç½® SSH è¿æ¥                                    â”‚ â”‚
â”‚  â”‚     â†’ é€‰æ‹©è¿œç¨‹ç›®å½•                                     â”‚ â”‚
â”‚  â”‚     â†’ å¯åŠ¨è‡ªåŠ¨åŒæ­¥                                     â”‚ â”‚
â”‚  â”‚                                                       â”‚ â”‚
â”‚  â”‚  5. æœ¬åœ°ç¼“å­˜                                           â”‚ â”‚
â”‚  â”‚     ~/.runicorn/cache/remote_server/...               â”‚ â”‚
â”‚  â”‚                                                       â”‚ â”‚
â”‚  â”‚  6. Web UI æŸ¥çœ‹ (http://localhost:23300)              â”‚ â”‚
â”‚  â”‚     â†’ å®æ—¶æŒ‡æ ‡å›¾è¡¨                                     â”‚ â”‚
â”‚  â”‚     â†’ è®­ç»ƒæ—¥å¿—æµ                                       â”‚ â”‚
â”‚  â”‚     â†’ å®éªŒå¯¹æ¯”                                         â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ç¯å¢ƒå‡†å¤‡

### æœåŠ¡å™¨ç«¯ (GPU è®­ç»ƒæœåŠ¡å™¨)

```bash
# 1. å®‰è£… Runicorn
pip install runicorn

# 2. éªŒè¯å®‰è£…
runicorn --version

# 3. (å¯é€‰) é…ç½® Manifest è‡ªåŠ¨ç”Ÿæˆ
# æŒ‰ç…§ docs/future/SERVER_SETUP_GUIDE.md è®¾ç½®
```

### æœ¬åœ°ç«¯ (å¼€å‘æœºå™¨)

```bash
# 1. å®‰è£… Runicorn
pip install runicorn

# 2. ç¡®ä¿å¯ä»¥ SSH åˆ°æœåŠ¡å™¨
ssh user@gpu-server.example.com

# 3. é…ç½® SSH å¯†é’¥ï¼ˆæ¨èï¼Œé¿å…é‡å¤è¾“å…¥å¯†ç ï¼‰
ssh-copy-id user@gpu-server.example.com
```

---

## æ­¥éª¤ 1: åœ¨æœåŠ¡å™¨è®­ç»ƒæ¨¡å‹

### 1.1 åˆ›å»ºè®­ç»ƒè„šæœ¬

**æœåŠ¡å™¨ä¸Š**: `train.py`

```python
import torch
import torch.nn as nn
import runicorn

# åˆå§‹åŒ– Runicorn è¿è¡Œ
run = runicorn.init(
    project="image_classification",
    name="resnet50_experiment",
    config={
        "model": "resnet50",
        "batch_size": 32,
        "learning_rate": 0.001,
        "epochs": 100,
        "optimizer": "Adam",
        "dataset": "CIFAR-10"
    },
    tags=["production", "resnet", "v2.0"]
)

# æ¨¡å‹å®šä¹‰
model = ...  # ä½ çš„ PyTorch æ¨¡å‹
optimizer = torch.optim.Adam(model.parameters(), lr=0.001)
criterion = nn.CrossEntropyLoss()

# è®­ç»ƒå¾ªç¯
for epoch in range(100):
    model.train()
    total_loss = 0
    correct = 0
    total = 0
    
    for batch_idx, (data, target) in enumerate(train_loader):
        optimizer.zero_grad()
        output = model(data)
        loss = criterion(output, target)
        loss.backward()
        optimizer.step()
        
        # ç´¯è®¡æŒ‡æ ‡
        total_loss += loss.item()
        pred = output.argmax(dim=1)
        correct += pred.eq(target).sum().item()
        total += target.size(0)
        
        # æ¯ 10 ä¸ª batch è®°å½•ä¸€æ¬¡
        if batch_idx % 10 == 0:
            step = epoch * len(train_loader) + batch_idx
            
            # è®°å½•è®­ç»ƒæŒ‡æ ‡
            run.log({
                "train/loss": loss.item(),
                "train/accuracy": 100. * correct / total,
                "train/learning_rate": optimizer.param_groups[0]['lr'],
                "epoch": epoch,
            }, step=step)
            
            # æ‰“å°æ—¥å¿—ï¼ˆä¼šè‡ªåŠ¨åŒæ­¥ï¼‰
            print(f"Epoch {epoch} [{batch_idx}/{len(train_loader)}] "
                  f"Loss: {loss.item():.4f} Acc: {100.*correct/total:.2f}%")
    
    # éªŒè¯
    model.eval()
    val_loss = 0
    val_correct = 0
    val_total = 0
    
    with torch.no_grad():
        for data, target in val_loader:
            output = model(data)
            loss = criterion(output, target)
            val_loss += loss.item()
            pred = output.argmax(dim=1)
            val_correct += pred.eq(target).sum().item()
            val_total += target.size(0)
    
    # è®°å½•éªŒè¯æŒ‡æ ‡
    run.log({
        "val/loss": val_loss / len(val_loader),
        "val/accuracy": 100. * val_correct / val_total,
    }, step=(epoch + 1) * len(train_loader))
    
    # è®°å½•æ±‡æ€»æŒ‡æ ‡
    run.summary({
        "best_val_accuracy": max(
            run.summary.get("best_val_accuracy", 0),
            100. * val_correct / val_total
        ),
        "total_epochs": epoch + 1
    })
    
    # æ¯ 10 ä¸ª epoch ä¿å­˜æ£€æŸ¥ç‚¹
    if (epoch + 1) % 10 == 0:
        torch.save(model.state_dict(), f'checkpoint_epoch_{epoch+1}.pth')
        print(f"âœ“ Checkpoint saved: epoch {epoch+1}")

# è®­ç»ƒå®Œæˆ
run.finish()
print("âœ“ Training completed!")
```

### 1.2 å¯åŠ¨è®­ç»ƒ

```bash
# SSH åˆ°æœåŠ¡å™¨
ssh user@gpu-server.example.com

# è¿›å…¥é¡¹ç›®ç›®å½•
cd /home/user/projects/my_ml_project

# å¯åŠ¨è®­ç»ƒï¼ˆå¯é€‰ï¼šä½¿ç”¨ tmux/screen ä¿æŒä¼šè¯ï¼‰
tmux new -s training
python train.py

# Detach from tmux: Ctrl+B, then D
# è®­ç»ƒä¼šåœ¨åå°ç»§ç»­è¿è¡Œ
```

### 1.3 éªŒè¯æ•°æ®ç”Ÿæˆ

```bash
# æ£€æŸ¥å®éªŒæ•°æ®ç›®å½•
ls -la ~/.runicorn/experiments/image_classification/resnet50_experiment/runs/

# åº”è¯¥çœ‹åˆ°ç±»ä¼¼çš„ç»“æ„ï¼š
# 20250123_180000_abc123/
#   â”œâ”€â”€ meta.json          # å…ƒæ•°æ®
#   â”œâ”€â”€ status.json        # è¿è¡ŒçŠ¶æ€
#   â”œâ”€â”€ summary.json       # æ±‡æ€»æŒ‡æ ‡
#   â”œâ”€â”€ events.jsonl       # æ—¶é—´åºåˆ—æŒ‡æ ‡
#   â””â”€â”€ logs.txt           # è®­ç»ƒæ—¥å¿—
```

---

## æ­¥éª¤ 2: é…ç½®è¿œç¨‹åŒæ­¥

### 2.1 å¯åŠ¨æœ¬åœ° Runicorn Viewer

**åœ¨æœ¬åœ°æœºå™¨ä¸Š**:

```bash
# å¯åŠ¨ Runicorn Web UI
runicorn viewer

# è¾“å‡ºç±»ä¼¼ï¼š
# â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
# â”‚ Runicorn Viewer                                          â”‚
# â”‚ Version: 0.4.0                                           â”‚
# â”‚ URL: http://127.0.0.1:23300                             â”‚
# â”‚                                                          â”‚
# â”‚ Press Ctrl+C to stop                                     â”‚
# â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
```

### 2.2 åœ¨æµè§ˆå™¨ä¸­é…ç½® SSH è¿æ¥

1. **æ‰“å¼€æµè§ˆå™¨**: `http://127.0.0.1:23300`

2. **è¿›å…¥è®¾ç½®é¡µé¢**: 
   - ç‚¹å‡»å³ä¸Šè§’ âš™ï¸ è®¾ç½®å›¾æ ‡
   - æˆ–è®¿é—® `http://127.0.0.1:23300/settings`

3. **æ·»åŠ  SSH è¿æ¥**:
   
   ç‚¹å‡» "è¿œç¨‹åŒæ­¥" é€‰é¡¹å¡ï¼Œå¡«å†™è¿æ¥ä¿¡æ¯ï¼š

   ```
   è¿æ¥åç§°: GPU Server 1
   æœåŠ¡å™¨åœ°å€: gpu-server.example.com
   ç«¯å£: 22
   ç”¨æˆ·å: your_username
   
   è®¤è¯æ–¹å¼: SSH å¯†é’¥ï¼ˆæ¨èï¼‰
   å¯†é’¥è·¯å¾„: ~/.ssh/id_rsa
   
   æˆ–
   
   è®¤è¯æ–¹å¼: å¯†ç 
   å¯†ç : ********
   ```

4. **æµ‹è¯•è¿æ¥**:
   - ç‚¹å‡» "æµ‹è¯•è¿æ¥" æŒ‰é’®
   - åº”æ˜¾ç¤º âœ“ è¿æ¥æˆåŠŸ

5. **é€‰æ‹©è¿œç¨‹ç›®å½•**:
   ```
   è¿œç¨‹å®éªŒæ ¹ç›®å½•: /home/user/.runicorn/experiments
   ```
   
   æˆ–ä½¿ç”¨è‡ªå®šä¹‰ç›®å½•ï¼š
   ```
   è¿œç¨‹å®éªŒæ ¹ç›®å½•: /data/experiments
   ```

6. **é…ç½®åŒæ­¥æ¨¡å¼**:
   
   ```
   åŒæ­¥æ¨¡å¼: è‡ªåŠ¨åŒæ­¥ï¼ˆæ¨èï¼‰
   åŒæ­¥é—´éš”: 30 ç§’
   
   å¯é€‰ï¼š
   â˜‘ å¯ç”¨ Manifest-based syncï¼ˆé«˜æ€§èƒ½ï¼‰
   â˜‘ ä»…åŒæ­¥å…ƒæ•°æ®å’Œå°æ–‡ä»¶
   â˜ åŒæ­¥å¤§æ–‡ä»¶ï¼ˆæ¨¡å‹æ£€æŸ¥ç‚¹ç­‰ï¼‰
   ```

7. **å¯åŠ¨åŒæ­¥**:
   - ç‚¹å‡» "ä¿å­˜å¹¶å¯åŠ¨åŒæ­¥" æŒ‰é’®
   - ç³»ç»Ÿå¼€å§‹åˆå§‹åŒæ­¥

### 2.3 ä½¿ç”¨ CLI é…ç½®ï¼ˆé«˜çº§ç”¨æˆ·ï¼‰

```bash
# æ–¹æ³• 1: äº¤äº’å¼é…ç½®
runicorn config ssh add

# æŒ‰æç¤ºè¾“å…¥ä¿¡æ¯

# æ–¹æ³• 2: ç›´æ¥å‘½ä»¤é…ç½®
runicorn config ssh add \
  --name "GPU Server 1" \
  --host gpu-server.example.com \
  --port 22 \
  --user your_username \
  --key ~/.ssh/id_rsa \
  --remote-root /home/user/.runicorn/experiments

# å¯åŠ¨åŒæ­¥
runicorn sync start --connection "GPU Server 1"
```

---

## æ­¥éª¤ 3: å®æ—¶æŸ¥çœ‹æŒ‡æ ‡

### 3.1 æŸ¥çœ‹å®éªŒåˆ—è¡¨

1. **è¿”å›ä¸»é¡µ**: ç‚¹å‡» "Runicorn" å›¾æ ‡æˆ–è®¿é—® `http://127.0.0.1:23300`

2. **å®éªŒåˆ—è¡¨**:
   - çœ‹åˆ°æ‰€æœ‰åŒæ­¥çš„å®éªŒ
   - æ˜¾ç¤ºé¡¹ç›®ã€åç§°ã€çŠ¶æ€ã€å¼€å§‹æ—¶é—´ç­‰
   - æ­£åœ¨è¿è¡Œçš„å®éªŒæ ‡è®°ä¸º ğŸŸ¢ Running

### 3.2 æŸ¥çœ‹å®æ—¶æŒ‡æ ‡

ç‚¹å‡»æ­£åœ¨è¿è¡Œçš„å®éªŒè¿›å…¥è¯¦æƒ…é¡µï¼š

#### æŒ‡æ ‡å›¾è¡¨

**è®­ç»ƒæŸå¤±**:
```
Loss æ›²çº¿ä¼šå®æ—¶æ›´æ–°ï¼Œæ˜¾ç¤ºï¼š
- train/loss: å®æ—¶è®­ç»ƒæŸå¤±
- val/loss: éªŒè¯æŸå¤±ï¼ˆæ¯ä¸ª epochï¼‰
```

**å‡†ç¡®ç‡**:
```
Accuracy æ›²çº¿æ˜¾ç¤ºï¼š
- train/accuracy: è®­ç»ƒå‡†ç¡®ç‡
- val/accuracy: éªŒè¯å‡†ç¡®ç‡
```

**å­¦ä¹ ç‡**:
```
Learning Rate æ›²çº¿ï¼š
- è·Ÿè¸ªå­¦ä¹ ç‡å˜åŒ–
- å¦‚æœä½¿ç”¨ schedulerï¼Œå¯ä»¥çœ‹åˆ°ä¸‹é™
```

#### å®æ—¶æ—¥å¿—æµ

```
åœ¨ "æ—¥å¿—" é€‰é¡¹å¡ï¼š

[18:30:45] Epoch 0 [0/1563] Loss: 2.3025 Acc: 10.00%
[18:30:47] Epoch 0 [10/1563] Loss: 2.1842 Acc: 15.63%
[18:30:49] Epoch 0 [20/1563] Loss: 1.9876 Acc: 21.88%
...
[18:35:12] âœ“ Checkpoint saved: epoch 10
...

æ—¥å¿—ä¼šè‡ªåŠ¨æ»šåŠ¨æ˜¾ç¤ºæœ€æ–°å†…å®¹
```

#### ç³»ç»ŸæŒ‡æ ‡ï¼ˆå¯é€‰ï¼‰

å¦‚æœæœåŠ¡å™¨å®‰è£…äº† GPU ç›‘æ§ï¼š

```
GPU ä½¿ç”¨ç‡: 95%
GPU å†…å­˜: 8.2 GB / 11 GB
CPU ä½¿ç”¨ç‡: 45%
å†…å­˜ä½¿ç”¨: 12 GB / 64 GB
```

### 3.3 å¯¹æ¯”å¤šä¸ªå®éªŒ

1. **è¿›å…¥å¯¹æ¯”é¡µé¢**: 
   - ä¸»é¡µé€‰æ‹©å¤šä¸ªå®éªŒï¼ˆå‹¾é€‰æ¡†ï¼‰
   - ç‚¹å‡» "å¯¹æ¯”" æŒ‰é’®

2. **å¹¶æ’æŸ¥çœ‹**:
   ```
   Experiment 1          Experiment 2          Experiment 3
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€        â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€        â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   ResNet50             ResNet18             VGG16
   LR: 0.001            LR: 0.01             LR: 0.001
   Batch: 32            Batch: 64            Batch: 32
   
   æœ€ä½³éªŒè¯å‡†ç¡®ç‡:
   85.6%                82.3%                83.9%
   ```

3. **é‡å å›¾è¡¨**:
   - æ‰€æœ‰å®éªŒçš„æŸå¤±æ›²çº¿å åŠ åœ¨ä¸€å¼ å›¾ä¸Š
   - ä¸åŒé¢œè‰²åŒºåˆ†
   - å¯ä»¥æ¸…æ¥šåœ°çœ‹åˆ°å“ªä¸ªé…ç½®æ•ˆæœæ›´å¥½

---

## é«˜çº§ç”¨æ³•

### ä½¿ç”¨ Manifest-Based Syncï¼ˆæ¨èï¼‰

Manifest sync æä¾› **99% ç½‘ç»œå‡å°‘** å’Œ **95% æ—¶é—´å‡å°‘**ã€‚

#### æœåŠ¡å™¨ç«¯è®¾ç½®

```bash
# 1. é¦–æ¬¡æ‰‹åŠ¨ç”Ÿæˆ
cd /data/experiments
runicorn generate-manifest --verbose

# 2. è®¾ç½®è‡ªåŠ¨ç”Ÿæˆï¼ˆæ¨èï¼‰
# æ–¹æ³• A: Systemd (Linux)
sudo systemctl enable runicorn-manifest.timer
sudo systemctl start runicorn-manifest.timer

# æ–¹æ³• B: Cron (Linux/macOS)
crontab -e
# æ·»åŠ ï¼šæ¯ 5 åˆ†é’Ÿç”Ÿæˆä¸€æ¬¡
*/5 * * * * cd /data/experiments && runicorn generate-manifest

# æ–¹æ³• C: Task Scheduler (Windows)
# å‚è€ƒ docs/future/SERVER_SETUP_GUIDE.md
```

#### å®¢æˆ·ç«¯è‡ªåŠ¨ä½¿ç”¨

Manifest sync **é»˜è®¤å¯ç”¨**ï¼Œæ— éœ€é¢å¤–é…ç½®ã€‚ç³»ç»Ÿä¼šï¼š

1. å°è¯•ä¸‹è½½ manifestï¼ˆ<1 ç§’ï¼‰
2. è®¡ç®—éœ€è¦åŒæ­¥çš„æ–‡ä»¶
3. å¹¶å‘ä¸‹è½½å˜æ›´æ–‡ä»¶
4. å¦‚æœ manifest ä¸å¯ç”¨ï¼Œè‡ªåŠ¨å›é€€åˆ°ä¼ ç»Ÿæ¨¡å¼

### ç›‘æ§å¤šä¸ªæœåŠ¡å™¨

```python
# åœ¨ä¸åŒçª—å£æˆ–æ ‡ç­¾é¡µ
# æœåŠ¡å™¨ 1
runicorn viewer --port 23300

# æœåŠ¡å™¨ 2
runicorn viewer --port 23301

# æœåŠ¡å™¨ 3
runicorn viewer --port 23302

# ç„¶ååˆ†åˆ«é…ç½®ä¸åŒçš„ SSH è¿æ¥
```

### ç¦»çº¿æ¨¡å¼

å³ä½¿æ–­å¼€ SSHï¼Œå·²åŒæ­¥çš„æ•°æ®ä»ç„¶å¯ä»¥æŸ¥çœ‹ï¼š

```bash
# åœæ­¢åŒæ­¥ä½†ä¿æŒ viewer è¿è¡Œ
# åœ¨ Web UI è®¾ç½®ä¸­ç‚¹å‡» "æš‚åœåŒæ­¥"

# æˆ–è€…å®Œå…¨ç¦»çº¿
runicorn viewer --offline
```

### å¯¼å‡ºæ•°æ®

```bash
# å¯¼å‡ºå®éªŒæ•°æ®ä¸º CSV
runicorn export --run-id 20250123_180000_abc123 --format csv

# å¯¼å‡ºä¸º TensorBoard æ ¼å¼
runicorn export --run-id 20250123_180000_abc123 --format tensorboard
```

---

## æ•…éšœæ’é™¤

### é—®é¢˜ 1: æ— æ³•è¿æ¥åˆ°æœåŠ¡å™¨

**ç—‡çŠ¶**: SSH è¿æ¥æµ‹è¯•å¤±è´¥

**è§£å†³æ–¹æ¡ˆ**:
```bash
# 1. æ£€æŸ¥ç½‘ç»œè¿æ¥
ping gpu-server.example.com

# 2. æ£€æŸ¥ SSH æœåŠ¡
ssh user@gpu-server.example.com

# 3. æ£€æŸ¥é˜²ç«å¢™
# ç¡®ä¿ç«¯å£ 22 å¼€æ”¾

# 4. æ£€æŸ¥å¯†é’¥æƒé™
chmod 600 ~/.ssh/id_rsa

# 5. æŸ¥çœ‹è¯¦ç»†é”™è¯¯
# åœ¨ Web UI çš„æµè§ˆå™¨æ§åˆ¶å°æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
```

### é—®é¢˜ 2: åŒæ­¥å¾ˆæ…¢

**ç—‡çŠ¶**: åˆå§‹åŒæ­¥éœ€è¦å¾ˆé•¿æ—¶é—´

**è§£å†³æ–¹æ¡ˆ**:

```bash
# æ–¹æ³• 1: å¯ç”¨ Manifest syncï¼ˆæ¨èï¼‰
# åœ¨æœåŠ¡å™¨ç«¯è®¾ç½® manifest ç”Ÿæˆ
runicorn generate-manifest

# æ–¹æ³• 2: ä»…åŒæ­¥å…ƒæ•°æ®
# Web UI è®¾ç½®ä¸­ï¼š
# â˜‘ ä»…åŒæ­¥å…ƒæ•°æ®å’Œå°æ–‡ä»¶
# â˜ åŒæ­¥å¤§æ–‡ä»¶

# æ–¹æ³• 3: å‡å°‘åŒæ­¥å®éªŒæ•°é‡
# ä»…åŒæ­¥æœ€è¿‘çš„å®éªŒ
# æ´»è·ƒçª—å£: æœ€è¿‘ 24 å°æ—¶
```

### é—®é¢˜ 3: æŒ‡æ ‡ä¸æ›´æ–°

**ç—‡çŠ¶**: å›¾è¡¨åœæ­¢æ›´æ–°

**è§£å†³æ–¹æ¡ˆ**:

```bash
# 1. æ£€æŸ¥è®­ç»ƒæ˜¯å¦è¿˜åœ¨è¿è¡Œ
ssh user@gpu-server.example.com
ps aux | grep python

# 2. æ£€æŸ¥åŒæ­¥çŠ¶æ€
# Web UI å³ä¸Šè§’åº”æ˜¾ç¤º ğŸŸ¢ å·²è¿æ¥
# å¦‚æœæ˜¾ç¤º ğŸ”´ æ–­å¼€è¿æ¥ï¼Œç‚¹å‡»é‡æ–°è¿æ¥

# 3. æ‰‹åŠ¨è§¦å‘åŒæ­¥
# ç‚¹å‡» "ç«‹å³åŒæ­¥" æŒ‰é’®

# 4. æ£€æŸ¥æ—¥å¿—
# ~/.runicorn/logs/sync.log
```

### é—®é¢˜ 4: æ•°æ®æ˜¾ç¤ºä¸å®Œæ•´

**ç—‡çŠ¶**: æŸäº›å®éªŒæˆ–æ–‡ä»¶ç¼ºå¤±

**è§£å†³æ–¹æ¡ˆ**:

```bash
# 1. æ£€æŸ¥æœåŠ¡å™¨ç«¯æ–‡ä»¶
ssh user@gpu-server.example.com
ls -la ~/.runicorn/experiments/

# 2. æ¸…é™¤æœ¬åœ°ç¼“å­˜é‡æ–°åŒæ­¥
rm -rf ~/.runicorn/cache/gpu-server
# ç„¶ååœ¨ Web UI é‡æ–°å¯åŠ¨åŒæ­¥

# 3. æ£€æŸ¥æƒé™
# ç¡®ä¿ SSH ç”¨æˆ·æœ‰è¯»å–æƒé™
```

### é—®é¢˜ 5: å†…å­˜å ç”¨é«˜

**ç—‡çŠ¶**: Runicorn viewer å ç”¨å¤§é‡å†…å­˜

**è§£å†³æ–¹æ¡ˆ**:

```bash
# 1. é™åˆ¶ç¼“å­˜å¤§å°
runicorn viewer --cache-size 1GB

# 2. æ¸…ç†æ—§æ•°æ®
runicorn cache clean --older-than 30d

# 3. ä»…ç¼“å­˜æœ€è¿‘å®éªŒ
# Web UI è®¾ç½® â†’ ä»…åŒæ­¥æœ€è¿‘ 7 å¤©çš„å®éªŒ
```

---

## æœ€ä½³å®è·µ

### 1. å¼€å‘æµç¨‹

```
1. æœ¬åœ°å¼€å‘å’Œè°ƒè¯•ä»£ç 
   â†“
2. æäº¤åˆ° Git
   â†“
3. åœ¨æœåŠ¡å™¨æ‹‰å–ä»£ç 
   â†“
4. å¯åŠ¨è®­ç»ƒï¼ˆä½¿ç”¨ tmux/screenï¼‰
   â†“
5. åœ¨æœ¬åœ° Runicorn æŸ¥çœ‹è¿›åº¦
   â†“
6. æ ¹æ®æŒ‡æ ‡è°ƒæ•´è¶…å‚æ•°
   â†“
7. è®­ç»ƒå®Œæˆååˆ†æç»“æœ
```

### 2. ç»„ç»‡å®éªŒ

```python
# ä½¿ç”¨æœ‰æ„ä¹‰çš„ project å’Œ name
run = runicorn.init(
    project="paper_reproduction",      # é¡¹ç›®åç§°
    name="transformer_base_v1",        # å®éªŒåç§°
    tags=["baseline", "attention"],    # æ ‡ç­¾ä¾¿äºç­›é€‰
)

# è®°å½•å®Œæ•´çš„é…ç½®
run.config.update({
    "model": "transformer",
    "layers": 6,
    "heads": 8,
    "d_model": 512,
    # ... æ‰€æœ‰è¶…å‚æ•°
})
```

### 3. è®°å½•ç­–ç•¥

```python
# ä¸åŒé¢‘ç‡è®°å½•ä¸åŒæŒ‡æ ‡
# æ¯ä¸ª batch: è®­ç»ƒæŸå¤±
if batch_idx % 10 == 0:
    run.log({"train/loss": loss.item()}, step=step)

# æ¯ä¸ª epoch: éªŒè¯æŒ‡æ ‡
run.log({
    "val/loss": val_loss,
    "val/accuracy": val_acc,
}, step=epoch)

# è®­ç»ƒç»“æŸ: æ±‡æ€»æŒ‡æ ‡
run.summary({
    "best_val_accuracy": best_acc,
    "total_time": training_time,
    "final_loss": final_loss,
})
```

### 4. æ€§èƒ½ä¼˜åŒ–

```python
# æ‰¹é‡è®°å½•ï¼ˆå‡å°‘ I/Oï¼‰
metrics_buffer = []

for batch in data_loader:
    # ... è®­ç»ƒ ...
    metrics_buffer.append({
        "loss": loss.item(),
        "step": step
    })
    
    # æ¯ 100 ä¸ª batch æ‰¹é‡è®°å½•
    if len(metrics_buffer) >= 100:
        for m in metrics_buffer:
            run.log({"train/loss": m["loss"]}, step=m["step"])
        metrics_buffer.clear()
```

---

## å®Œæ•´ç¤ºä¾‹ï¼šç«¯åˆ°ç«¯å·¥ä½œæµ

### åœºæ™¯

ç ”ç©¶å‘˜ Alice éœ€è¦åœ¨å®éªŒå®¤çš„ GPU æœåŠ¡å™¨ä¸Šè®­ç»ƒå¤šä¸ªæ¨¡å‹ï¼Œåœ¨åŠå…¬å®¤ç”µè„‘ä¸Šå®æ—¶ç›‘æ§ã€‚

### æ­¥éª¤

```bash
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ç¬¬ 1 å¤©ä¸Šåˆï¼šæœåŠ¡å™¨è®¾ç½®
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# SSH åˆ°æœåŠ¡å™¨
ssh alice@lab-gpu-01.university.edu

# å®‰è£… Runicorn
pip install runicorn

# è®¾ç½® Manifest è‡ªåŠ¨ç”Ÿæˆ
crontab -e
# æ·»åŠ ï¼š*/5 * * * * cd ~/experiments && runicorn generate-manifest

# éªŒè¯
runicorn generate-manifest --verbose


# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ç¬¬ 1 å¤©ä¸Šåˆï¼šå‡†å¤‡è®­ç»ƒè„šæœ¬
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# ç¼–è¾‘è®­ç»ƒè„šæœ¬
vim ~/projects/vision/train_resnet.py
# æ·»åŠ  Runicorn é›†æˆï¼ˆè§ä¸Šæ–‡ç¤ºä¾‹ï¼‰

# å¯åŠ¨ç¬¬ä¸€ä¸ªå®éªŒ
tmux new -s exp1
python train_resnet.py --model resnet50 --lr 0.001 --batch-size 32
# Ctrl+B, D (detach)


# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ç¬¬ 1 å¤©ä¸‹åˆï¼šæœ¬åœ°ç›‘æ§è®¾ç½®
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# åœ¨æœ¬åœ°ç”µè„‘ï¼ˆåŠå…¬å®¤ï¼‰
# ç¡®ä¿å¯ä»¥ SSH
ssh alice@lab-gpu-01.university.edu

# å¯åŠ¨ Runicorn viewer
runicorn viewer

# æµè§ˆå™¨è®¿é—® http://localhost:23300
# åœ¨ Web UI é…ç½® SSH è¿æ¥ï¼š
#   - æœåŠ¡å™¨: lab-gpu-01.university.edu
#   - ç”¨æˆ·: alice
#   - å¯†é’¥: ~/.ssh/id_rsa
#   - è¿œç¨‹ç›®å½•: /home/alice/experiments

# æŸ¥çœ‹å®æ—¶è®­ç»ƒè¿›åº¦
# âœ“ çœ‹åˆ°å®éªŒ "resnet50_experiment"
# âœ“ Loss æ›²çº¿å®æ—¶æ›´æ–°
# âœ“ æ—¥å¿—æµå®æ—¶æ˜¾ç¤º


# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ç¬¬ 1 å¤©æ™šä¸Šï¼šå¯åŠ¨æ›´å¤šå®éªŒ
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# SSH åˆ°æœåŠ¡å™¨
ssh alice@lab-gpu-01.university.edu

# å¯åŠ¨å®éªŒ 2
tmux new -s exp2
python train_resnet.py --model resnet18 --lr 0.01 --batch-size 64
# Ctrl+B, D

# å¯åŠ¨å®éªŒ 3
tmux new -s exp3
python train_vgg.py --model vgg16 --lr 0.001 --batch-size 32
# Ctrl+B, D

# åœ¨æœ¬åœ°å¯ä»¥åŒæ—¶çœ‹åˆ° 3 ä¸ªå®éªŒå¹¶è¡Œè¿è¡Œ


# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ç¬¬ 2 å¤©ï¼šåˆ†æå’Œå¯¹æ¯”
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# åœ¨æœ¬åœ° Web UI
# 1. æŸ¥çœ‹å®éªŒåˆ—è¡¨
# 2. é€‰æ‹© 3 ä¸ªå®éªŒ
# 3. ç‚¹å‡» "å¯¹æ¯”"
# 4. æŸ¥çœ‹å“ªä¸ªé…ç½®æ•ˆæœæœ€å¥½
# 5. å†³å®šç»§ç»­è°ƒä¼˜å“ªä¸ªæ¨¡å‹


# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ç¬¬ 3 å¤©ï¼šç»§ç»­æ”¹è¿›
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# åŸºäºå¯¹æ¯”ç»“æœï¼Œå¯åŠ¨æ–°å®éªŒ
ssh alice@lab-gpu-01.university.edu
tmux new -s exp4
python train_resnet.py --model resnet50 --lr 0.0005 --batch-size 64
# ä½¿ç”¨è°ƒæ•´åçš„è¶…å‚æ•°

# æœ¬åœ°ç»§ç»­ç›‘æ§
# âœ“ å¯ä»¥çœ‹åˆ°æ‰€æœ‰å†å²å®éªŒ
# âœ“ å®æ—¶å¯¹æ¯”æ–°æ—§å®éªŒ
# âœ“ å¿«é€Ÿè¿­ä»£ä¼˜åŒ–
```

---

## æ€»ç»“

è¿™ä¸ªå·¥ä½œæµè®©ä½ èƒ½å¤Ÿï¼š

âœ… **ä¾¿æ·è®­ç»ƒ**: åœ¨è¿œç¨‹ GPU æœåŠ¡å™¨è®­ç»ƒï¼Œæ— éœ€ååœ¨æœºæˆ¿  
âœ… **å®æ—¶ç›‘æ§**: æœ¬åœ°æµè§ˆå™¨æŸ¥çœ‹è®­ç»ƒè¿›åº¦ï¼Œéšæ—¶éšåœ°  
âœ… **é«˜æ•ˆåŒæ­¥**: Manifest-based sync æä¾›è¿‘ä¹å³æ—¶çš„æ•°æ®åŒæ­¥  
âœ… **çµæ´»å¯¹æ¯”**: è½»æ¾å¯¹æ¯”å¤šä¸ªå®éªŒï¼Œå¿«é€Ÿæ‰¾åˆ°æœ€ä½³é…ç½®  
âœ… **æŒç»­æ”¹è¿›**: åŸºäºå®æ—¶åé¦ˆå¿«é€Ÿè¿­ä»£ï¼Œç¼©çŸ­ç ”ç©¶å‘¨æœŸ

---

## ç›¸å…³æ–‡æ¡£

- **API æ–‡æ¡£**: [../api/zh/manifest_api.md](../api/zh/manifest_api.md)
- **SSH API**: [../api/zh/ssh_api.md](../api/zh/ssh_api.md)
- **æœåŠ¡å™¨è®¾ç½®**: [../future/SERVER_SETUP_GUIDE.md](../future/SERVER_SETUP_GUIDE.md)
- **å®Œæ•´å·¥ä½œæµè§†é¢‘**: (å¾…æ·»åŠ )

---

**Happy Training! ğŸš€**
