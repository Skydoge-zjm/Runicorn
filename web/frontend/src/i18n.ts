import i18n from 'i18next'
import { initReactI18next } from 'react-i18next'
import LanguageDetector from 'i18next-browser-languagedetector'

const resources = {
  en: {
    translation: {
      'app.title': 'Runicorn Viewer',
      'menu.runs': 'Runs',
      'menu.remote': 'Remote',
      'tag.api_ok': 'API OK',
      'tag.api_loading': 'API…',
      'tag.api_down': 'API DOWN',

      'settings.drawer.title': 'Settings',
      'settings.theme.title': 'Theme',
      'settings.theme.mode': 'Mode',
      'settings.theme.light': 'Light',
      'settings.theme.dark': 'Dark',
      'settings.theme.auto': 'Follow System',

      'settings.appearance.primary_color': 'Primary Color',
      'settings.appearance.density': 'Density',
      'settings.appearance.density_compact': 'Compact (high info density)',
      'settings.appearance.density_default': 'Default',
      'settings.appearance.density_loose': 'Loose (more whitespace)',
      'settings.glass': 'Glass effect',
      'settings.glass.on': 'On',
      'settings.glass.off': 'Off',

      'settings.data.title': 'Data Directory',
      'settings.data.current_storage': 'Current storage: {{path}}',
      'settings.data.user_root.label': 'User root directory (lower priority than env RUNICORN_DIR)',
      'settings.data.user_root.placeholder': 'e.g. D:\\RunicornData',
      'settings.data.note': 'Saved to user config and takes effect immediately. If RUNICORN_DIR is set, it has higher priority.',
      'settings.data.save': 'Save Data Directory',

      'settings.messages.enter_valid_path': 'Please enter a valid absolute path (e.g. D:\\RunicornData)',
      'settings.messages.updated': 'User root updated',
      'settings.messages.update_failed': 'Update failed',

      'background.title': 'Background',
      'background.type.image': 'Image',
      'background.type.gradient': 'Gradient',
      'background.type.color': 'Color',
      'background.image_url': 'Image URL',
      'background.gradient_presets': 'Gradient presets',
      'background.color': 'Background color',
      'background.opacity': 'Opacity',
      'background.blur': 'Blur',

      'offline_import.title': 'Offline Import (zip / tar.gz)',
      'offline_import.desc': 'Import runs exported from offline Linux servers into the local storage for viewing.',
      'offline_import.drag': 'Drag file here or click to select',
      'offline_import.supports': 'Supports .zip / .tar.gz (internal layout: project/name/runs/<run_id>)',
      'offline_import.importing': 'Importing…',
      'offline_import.success': 'Imported {{count}} new runs.',
      'offline_import.failed': 'Import failed',

      'remote_moved.title': 'Remote Sync',
      'remote_moved.tip': 'Remote live sync has moved to a dedicated page. Use the top "Remote" menu or click to open.',
      'settings.done': 'Done',

      'runs.refresh': 'Refresh',
      'runs.auto_refresh_hint': 'Auto refresh every 5s',
      'runs.auto_refresh': 'Auto Refresh',
      'runs.filter.project': 'Project:',
      'runs.filter.name': 'Name:',
      'runs.filter.all': 'All',

      'table.project': 'Project',
      'table.name': 'Name',
      'table.run_id': 'Run ID',
      'table.status': 'Status',
      'table.best_top1': 'Best Top1',
      'table.pid': 'PID',
      'table.created': 'Created',
      'table.actions': 'Actions',
      'table.view': 'View',

      'run.title': 'Run {{id}}',
      'run.descriptions.status': 'Status',
      'run.descriptions.pid': 'PID',
      'run.descriptions.project': 'Project',
      'run.descriptions.name': 'Name',
      'run.descriptions.dir': 'Run Dir',
      'run.descriptions.logs': 'Logs',
      'run.descriptions.metrics': 'Metrics Events',

      'gpu.util': 'Util',
      'gpu.mem': 'Memory',
      'gpu.power': 'Power',
      'gpu.temp': 'Temp',
      'gpu.chart.util': 'GPU Utilization %',
      'gpu.chart.mem': 'Memory Used %',
      'gpu.chart.power': 'Power (W)',
      'gpu.chart.temp': 'Temperature (°C)',
      'gpu.not_available': 'GPU telemetry not available',
      'polling.every2s': 'Polling every 2s',
      'pause': 'Pause',
      'gpu.detail': 'GPUs: {{count}}',
      'gpu.tooltip.item': 'GPU{{index}} {{name}}',
      'gpu.tooltip.metrics': '{{util}}% · {{mem}}% · {{power}}W · {{temp}}°C',

      'compare.title': 'Compare Runs (Same Experiment)',
      'compare.select.runs': 'Runs:',
      'compare.select.runs.placeholder': 'Select runs to overlay',
      'compare.select.metrics': 'Metrics:',
      'compare.select.metrics.placeholder': 'Select metric keys',
      'compare.stepx': 'Step X:',
      'compare.refresh': 'Refresh',
      'compare.tip': 'Select one or more runs and metrics to overlay.',

      'metrics.title': 'Metrics',
      'metrics.two_columns': 'Two Columns',
      'metrics.none': 'No step metrics yet.',
      'gpu.title': 'GPU Telemetry',
      'logs.title': 'Live Logs',
      'logs.status.connected': 'Connected',
      'logs.status.connecting': 'Connecting...',
      'logs.status.disconnected': 'Disconnected',
      'logs.status.retry_in': 'retry in {{sec}}s',
      'logs.tooltip.autoscroll': 'Automatically scroll to the latest line',
      'logs.autoscroll': 'Auto Scroll',
      'logs.tooltip.filter_tqdm': 'Hide tqdm progress frames to reduce noise',
      'logs.filter_tqdm': 'Filter tqdm',
      'logs.clear': 'Clear',
      'logs.copy': 'Copy',
      'logs.copied': 'Copied logs to clipboard',
      'logs.copy_failed': 'Copy failed',

      'remote.title': 'Remote Sync (SSH)',
      'remote.desc': 'Establish SSH connection to a Linux server, browse and choose a remote directory as data source, mirror to local storage and visualize on the Runs page.',
      'remote.connect.title': 'Connect to server',
      'remote.placeholder.host': 'Host, e.g. 10.0.0.2',
      'remote.placeholder.port': 'Port',
      'remote.placeholder.user': 'Username',
      'remote.placeholder.password': 'Password (optional)',
      'remote.placeholder.pkey': 'Private key content (optional)',
      'remote.placeholder.pkey_path': 'Or private key path (optional, e.g. ~/.ssh/id_rsa)',
      'remote.connect.button': 'Connect',
      'remote.connected': 'Connected: {{user}}@{{host}}:{{port}}',
      'remote.disconnect': 'Disconnect',

      'remote.choose.title': 'Choose remote directory',
      'remote.current_dir': 'Current:',
      'remote.up': 'Up',
      'remote.refresh': 'Refresh',
      'remote.empty': 'Empty or no permission',
      'remote.interval.suffix': 'sec',
      'remote.sync_dir': 'Sync this directory',
      'remote.tip': 'Select project/name/runs (new) or runs (legacy) instead of a specific <run_id>.',

      'remote.tasks.title': 'Sync Tasks',
      'remote.tasks.item.stats': 'copied: {{copied}}, appended: {{appended}}B, scans: {{scans}}, alive: {{alive}}',
      'remote.tasks.stop': 'Stop',
      'remote.tasks.none': 'No tasks',
      'remote.to_runs': 'After syncing, go to the Runs page for visualization.',

      'remote.msg.fill_host_user': 'Please fill host and username',
      'remote.msg.ssh_connected': 'SSH connected',
      'remote.msg.connect_failed': 'Connection failed',
      'remote.msg.dir_failed': 'Failed to list directory',
      'remote.msg.need_connect': 'Please connect SSH first',
      'remote.msg.need_path': 'Please choose a remote directory',
      'remote.msg.started': 'Live sync started',
      'remote.msg.start_failed': 'Failed to start',
    },
  },
  zh: {
    translation: {
      'app.title': 'Runicorn 查看器',
      'menu.runs': '运行',
      'menu.remote': '远程',
      'tag.api_ok': 'API 正常',
      'tag.api_loading': 'API…',
      'tag.api_down': 'API 不可用',

      'settings.drawer.title': '设置',
      'settings.theme.title': '主题',
      'settings.theme.mode': '模式',
      'settings.theme.light': '浅色',
      'settings.theme.dark': '深色',
      'settings.theme.auto': '跟随系统',

      'settings.appearance.primary_color': '主色',
      'settings.appearance.density': '密度',
      'settings.appearance.density_compact': '紧凑型（信息密度高）',
      'settings.appearance.density_default': '默认',
      'settings.appearance.density_loose': '宽松型（留白更舒适）',
      'settings.glass': '玻璃效果',
      'settings.glass.on': '开启',
      'settings.glass.off': '关闭',

      'settings.data.title': '数据目录',
      'settings.data.current_storage': '当前存储根（storage）：{{path}}',
      'settings.data.user_root.label': '用户根目录（优先级低于环境变量 RUNICORN_DIR）',
      'settings.data.user_root.placeholder': '例如：D:\\RunicornData',
      'settings.data.note': '设置将写入用户配置并立即生效；若设置了环境变量 RUNICORN_DIR，则优先使用环境变量。',
      'settings.data.save': '保存数据目录',

      'settings.messages.enter_valid_path': '请输入有效的目录绝对路径（例如 D:\\RunicornData）',
      'settings.messages.updated': '用户根目录已更新',
      'settings.messages.update_failed': '更新失败',

      'background.title': '背景',
      'background.type.image': '图片',
      'background.type.gradient': '渐变',
      'background.type.color': '纯色',
      'background.image_url': '图片地址（URL）',
      'background.gradient_presets': '渐变预设',
      'background.color': '背景颜色',
      'background.opacity': '不透明度',
      'background.blur': '模糊强度',

      'offline_import.title': '离线导入（zip / tar.gz）',
      'offline_import.desc': '将离线 Linux 服务器导出的运行记录导入到本机存储以便查看。',
      'offline_import.drag': '将文件拖拽到此处，或点击选择本地归档',
      'offline_import.supports': '支持 .zip / .tar.gz（内部目录为 project/name/runs/<run_id>）',
      'offline_import.importing': '正在导入…',
      'offline_import.success': '导入成功：{{count}} 个新运行。',
      'offline_import.failed': '导入失败',

      'remote_moved.title': '远程同步',
      'remote_moved.tip': '远程实时同步已移动到独立页面，请通过顶部「Remote」进入或点击打开。',
      'settings.done': '完成',

      'runs.refresh': '刷新',
      'runs.auto_refresh_hint': '每 5 秒自动刷新',
      'runs.auto_refresh': '自动刷新',
      'runs.filter.project': '项目：',
      'runs.filter.name': '实验：',
      'runs.filter.all': '全部',

      'table.project': '项目',
      'table.name': '实验',
      'table.run_id': '运行 ID',
      'table.status': '状态',
      'table.best_top1': '最佳 Top1',
      'table.pid': 'PID',
      'table.created': '创建时间',
      'table.actions': '操作',
      'table.view': '查看',

      'run.title': '运行 {{id}}',
      'run.descriptions.status': '状态',
      'run.descriptions.pid': 'PID',
      'run.descriptions.project': '项目',
      'run.descriptions.name': '实验',
      'run.descriptions.dir': '运行目录',
      'run.descriptions.logs': '日志',
      'run.descriptions.metrics': '指标事件',

      'gpu.util': '利用率',
      'gpu.mem': '显存',
      'gpu.power': '功耗',
      'gpu.temp': '温度',
      'gpu.chart.util': 'GPU 利用率 %',
      'gpu.chart.mem': '显存使用 %',
      'gpu.chart.power': '功耗 (W)',
      'gpu.chart.temp': '温度 (°C)',
      'gpu.not_available': 'GPU 面板不可用',
      'polling.every2s': '每 2 秒轮询',
      'pause': '暂停',
      'gpu.detail': 'GPU 数：{{count}}',
      'gpu.tooltip.item': 'GPU{{index}} {{name}}',
      'gpu.tooltip.metrics': '{{util}}% · {{mem}}% · {{power}}W · {{temp}}°C',

      'compare.title': '对比运行（同一实验）',
      'compare.select.runs': '运行：',
      'compare.select.runs.placeholder': '选择需要叠加的运行',
      'compare.select.metrics': '指标：',
      'compare.select.metrics.placeholder': '选择指标键',
      'compare.stepx': '横轴：',
      'compare.refresh': '刷新',
      'compare.tip': '选择一个或多个运行与指标以叠加展示。',

      'metrics.title': '指标',
      'metrics.two_columns': '双列布局',
      'metrics.none': '暂无步进指标。',
      'gpu.title': 'GPU 面板',
      'logs.title': '实时日志',
      'logs.status.connected': '已连接',
      'logs.status.connecting': '连接中...',
      'logs.status.disconnected': '已断开',
      'logs.status.retry_in': '{{sec}} 秒后重试',
      'logs.tooltip.autoscroll': '自动滚动到最新行',
      'logs.autoscroll': '自动滚动',
      'logs.tooltip.filter_tqdm': '隐藏 tqdm 进度帧以降低噪声',
      'logs.filter_tqdm': '过滤 tqdm',
      'logs.clear': '清空',
      'logs.copy': '复制',
      'logs.copied': '已复制日志到剪贴板',
      'logs.copy_failed': '复制失败',

      'remote.title': '远程同步（SSH）',
      'remote.desc': '建立到 Linux 服务器的 SSH 连接，浏览并选择远程目录作为数据源，实时镜像到本地 storage 并在“运行”页可视化。',
      'remote.connect.title': '连接到服务器',
      'remote.placeholder.host': '主机，例如 10.0.0.2',
      'remote.placeholder.port': '端口',
      'remote.placeholder.user': '用户名',
      'remote.placeholder.password': '密码（可选）',
      'remote.placeholder.pkey': '私钥内容（可选）',
      'remote.placeholder.pkey_path': '或 私钥路径（可选，如 ~/.ssh/id_rsa）',
      'remote.connect.button': '连接',
      'remote.connected': '已连接：{{user}}@{{host}}:{{port}}',
      'remote.disconnect': '断开',

      'remote.choose.title': '选择远程目录',
      'remote.current_dir': '当前目录：',
      'remote.up': '上一级',
      'remote.refresh': '刷新',
      'remote.empty': '空目录或无权限',
      'remote.interval.suffix': '秒',
      'remote.sync_dir': '同步此目录',
      'remote.tip': '建议选择到 project/name/runs（新结构）或 runs（旧结构）而不是具体 <run_id>。',

      'remote.tasks.title': '同步任务',
      'remote.tasks.item.stats': 'copied: {{copied}}, appended: {{appended}}B, scans: {{scans}}, alive: {{alive}}',
      'remote.tasks.stop': '停止',
      'remote.tasks.none': '暂无任务',
      'remote.to_runs': '同步成功后，前往 “运行” 页面查看可视化。',

      'remote.msg.fill_host_user': '请填写主机与用户名',
      'remote.msg.ssh_connected': 'SSH 已连接',
      'remote.msg.connect_failed': '连接失败',
      'remote.msg.dir_failed': '读取目录失败',
      'remote.msg.need_connect': '请先建立 SSH 连接',
      'remote.msg.need_path': '请选择远程目录',
      'remote.msg.started': '已启动实时同步',
      'remote.msg.start_failed': '启动失败',
    },
  },
}

i18n
  .use(LanguageDetector)
  .use(initReactI18next)
  .init({
    resources,
    fallbackLng: 'en',
    interpolation: { escapeValue: false },
    detection: { order: ['querystring', 'localStorage', 'navigator'], caches: ['localStorage'] },
  })

export default i18n
